<!DOCTYPE HTML>
<html>
  <head>
  	<meta charset="UTF-8">
  	<link rel="stylesheet" type="text/css" href="canvas.css" />
  	<script src="unit.js"></script>
  	<script type="text/javascript" src="bouncingBalls.js" ></script>
    <title>Bouncing balls</title>
  </head>
  <body>
  	<label>Gravity
		<input id="gravity" type="number" step="1" />
	</label>
	<label>Drag
		<input id="drag" type="number" step="0.01" />
	</label>
	<label>Elasticity
		<input id="elasticity" type="number" step="0.1" />
	</label>
    <canvas id="playground" style="border:1px solid #000000;" />
    <script>
    	window.addEventListener('load', function(oEvent) {
	    	bouncingBallsV.initCanvas("playground", window.innerWidth - 2, window.innerHeight - 21);

			// resize the canvas to fill browser window dynamically
			function resizeCanvas() {
				const canvas = document.getElementById("playground");

				canvas.width = window.innerWidth - 2;
				canvas.height = window.innerHeight - 21;
			}
			resizeCanvas();

			window.addEventListener("resize", resizeCanvas, false);

			// handle environment input changes
			var gravityInput = document.getElementById("gravity");
			gravityInput.value = bouncingBallsV.getGravity();
			gravityInput.addEventListener("change", function (oEvent) {
				try {
					bouncingBallsV.setGravity(parseFloat(oEvent.target.value, 10));
				} catch(e) {
					gravityInput.value = bouncingBallsV.getGravity();
					alert(e);
				}
			});

			var dragInput = document.getElementById("drag");
			dragInput.value = bouncingBallsV.getDragCoef();
			dragInput.addEventListener("change", function (oEvent) {
				try {
					bouncingBallsV.setDragCoef(parseFloat(oEvent.target.value, 10));
				} catch(e) {
					dragInput.value = bouncingBallsV.getDragCoef();
					alert(e);
				}
			});

			var elasticityInput = document.getElementById("elasticity");
			elasticityInput.value = bouncingBallsV.getElasticityCoef();
			elasticityInput.addEventListener("change", function (oEvent) {
				try {
					bouncingBallsV.setElasticityCoef(parseFloat(oEvent.target.value, 10));
				} catch(e) {
					elasticityInput.value = bouncingBallsV.getElasticityCoef();
					alert(e);
				}
			});
		});
    </script>
  </body>
</html>